miniTruco Android
-----------------

Depois de muito tempo, finalmente comecei a versao Android do miniTruco.

Ainda está em desenvolvimento - o backlog abaixo informa as tarefas que faltam para uma versão "0.1"

A licença será GPLv3, pois trata-se de um "fork" do miniTruco original.


Backlog
-------

Features:
- Jogar carta fechada

Débito Técnico:
- Bitmap da tela de abertura
- Decidir quais estratégias entram, e como  
- Bug: quando J2 anuncia truco, a resposta e o diálogo vêm antes do anúncio
- acertar o evento de resize, dissociando init do jogo e resize da tela (que   
  inclui limpar o cache de bitmaps de cartas).
- Reduzir o requisito técnico para Android 1.5, se for viável
- Reintroduzir testes da parte visual (que não funcionam mais por
  usarmos o Robolectric)
- Bug: throwIfRecycled aleatório [1]
- Bug: arrayindexoutofbounds quando fechou a partida [2]
- Verificar se é possível consertar a ponta do balãozinho que ficou cinza com o anti-alias

Nice to have:
- Ícone
- Opção de reinício no fim da partida (e talvez alguma firula extra)
- Refactor: fazer os métodos de Mesa e Balão aguardarem o fim das animações
    automaticamente (tirando as referências a MesaView.aguardaFimAnimacoes
    de Partida)
- Refactor: fazer Carta e CartaVisual serem uma coisa só (ou uma herdar a outra)


[1] (aconteceu no final da 1a. rodada de uma mão de 11 forçada pra equipe adversária):
E/AndroidRuntime( 1104): Uncaught handler: thread main exiting due to uncaught exception
E/AndroidRuntime( 1104): java.lang.NullPointerException
E/AndroidRuntime( 1104):        at android.graphics.Canvas.throwIfRecycled(Canvas.java:954)
E/AndroidRuntime( 1104):        at android.graphics.Canvas.drawBitmap(Canvas.java:980)
E/AndroidRuntime( 1104):        at me.chester.minitruco.android.CartaVisual.draw(CartaVisual.java:145)
E/AndroidRuntime( 1104):        at me.chester.minitruco.android.MesaView.onDraw(MesaView.java:536)
E/AndroidRuntime( 1104):        at android.view.View.draw(View.java:6274)
E/AndroidRuntime( 1104):        at android.view.ViewGroup.drawChild(ViewGroup.java:1526)
E/AndroidRuntime( 1104):        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1256)
E/AndroidRuntime( 1104):        at android.view.ViewGroup.drawChild(ViewGroup.java:1524)
E/AndroidRuntime( 1104):        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1256)
E/AndroidRuntime( 1104):        at android.view.View.draw(View.java:6277)
E/AndroidRuntime( 1104):        at android.widget.FrameLayout.draw(FrameLayout.java:352)
E/AndroidRuntime( 1104):        at android.view.ViewGroup.drawChild(ViewGroup.java:1526)
E/AndroidRuntime( 1104):        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1256)
E/AndroidRuntime( 1104):        at android.view.ViewGroup.drawChild(ViewGroup.java:1524)
E/AndroidRuntime( 1104):        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1256)
E/AndroidRuntime( 1104):        at android.view.View.draw(View.java:6277)
E/AndroidRuntime( 1104):        at android.widget.FrameLayout.draw(FrameLayout.java:352)
E/AndroidRuntime( 1104):        at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1883)
E/AndroidRuntime( 1104):        at android.view.ViewRoot.draw(ViewRoot.java:1332)
E/AndroidRuntime( 1104):        at android.view.ViewRoot.performTraversals(ViewRoot.java:1097)
E/AndroidRuntime( 1104):        at android.view.ViewRoot.handleMessage(ViewRoot.java:1613)
E/AndroidRuntime( 1104):        at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 1104):        at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime( 1104):        at android.app.ActivityThread.main(ActivityThread.java:4203)
E/AndroidRuntime( 1104):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 1104):        at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime( 1104):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
E/AndroidRuntime( 1104):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:549)
E/AndroidRuntime( 1104):        at dalvik.system.NativeStart.main(Native Method)


[2] W/dalvikvm(  677): threadid=3: thread exiting with uncaught exception (group=0x4001aa28)
E/AndroidRuntime(  677): Uncaught handler: thread main exiting due to uncaught exception
E/AndroidRuntime(  677): java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 9
E/AndroidRuntime(  677):        at java.util.Vector.elementAt(Vector.java:351)
E/AndroidRuntime(  677):        at me.chester.minitruco.android.MesaView.onDraw(MesaView.java:548)
E/AndroidRuntime(  677):        at android.view.View.draw(View.java:6274)
E/AndroidRuntime(  677):        at android.view.ViewGroup.drawChild(ViewGroup.java:1526)
E/AndroidRuntime(  677):        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1256)
E/AndroidRuntime(  677):        at android.view.ViewGroup.drawChild(ViewGroup.java:1524)
E/AndroidRuntime(  677):        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1256)
E/AndroidRuntime(  677):        at android.view.View.draw(View.java:6277)
E/AndroidRuntime(  677):        at android.widget.FrameLayout.draw(FrameLayout.java:352)
E/AndroidRuntime(  677):        at android.view.ViewGroup.drawChild(ViewGroup.java:1526)
E/AndroidRuntime(  677):        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1256)
E/AndroidRuntime(  677):        at android.view.ViewGroup.drawChild(ViewGroup.java:1524)
E/AndroidRuntime(  677):        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1256)
E/AndroidRuntime(  677):        at android.view.View.draw(View.java:6277)
E/AndroidRuntime(  677):        at android.widget.FrameLayout.draw(FrameLayout.java:352)
E/AndroidRuntime(  677):        at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1883)
E/AndroidRuntime(  677):        at android.view.ViewRoot.draw(ViewRoot.java:1332)
E/AndroidRuntime(  677):        at android.view.ViewRoot.performTraversals(ViewRoot.java:1097)
E/AndroidRuntime(  677):        at android.view.ViewRoot.handleMessage(ViewRoot.java:1613)
E/AndroidRuntime(  677):        at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(  677):        at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(  677):        at android.app.ActivityThread.main(ActivityThread.java:4203)
E/AndroidRuntime(  677):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  677):        at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime(  677):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
E/AndroidRuntime(  677):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:549)
E/AndroidRuntime(  677):        at dalvik.system.NativeStart.main(Native Method)